# Перый урок по анализу систем

### Схема ES - https://miro.com/app/board/uXjVNMC0B0o=/?share_link_id=950317162626


Мысли по итогам ES:
- Начинал идти по процессу бизнес пользователей и их сценариям. Местами делал допущения или описывал части системы которых нет или просто упоминаются.
Исходил из личного опыта как бы можно было это сделать и, если необходимо, дополнить. 
- Так же старался присваивать агрегаты по атомарности процессов - если один без другого в реальном времени не идёт и они отвечают за один бизнес процесс - это оно, как мне показалось
- В процессе понял, что есть места с шаблонами для внешних людей - это уведомления пользователям и формы тестирования.

Возможно письма с запросом товаров на склад/запросы печений

- Опустил момент с спецификой работы клиента - мобильное приложение,web - возмонжо это повлияет на некоторые процессы
- Опустил роль работника склада при работе через личный кабинет
- Агрегаты личного кабинета добавлены сейчас, чтобы иметь точку привязки, если они будут расширяться (уверен, что будут)
- Не стал описывать как будет реализован процесс нотификаций для любого действия, указал только самые важные. В дальнейшем это может повлиять на то, что будет эта функциональность отдельным сервисом или внутри монолита
В любом случае вижу такой механизм - подписываемся на изменения конкретных моделей, проверяем какие поля изменились, достаём шаблон - отправляем куда надо
- Опустил процесс регистрации и попадание пользователей в систему и все связанные с этим вещи
- Есть моменты, которые про отрицательный баланс работников, воркеров и всей компании и это отметил в вопросах на ES, как и другие вопросы


### Схема данных - https://lucid.app/lucidchart/62a2b3f6-0c2b-484d-a243-f897c61e2c17/edit?viewport_loc=-2836%2C-1938%2C8668%2C4858%2C0_0&invitationId=inv_81450cfb-744c-436e-9643-8151297b16d0

_Со cхемой данных оказалась проблема - LucidChart при процессе работы сказал, что количество элементов превысило бесплатный предел :(_

_А переносить это быстро не получилось, поэтому оставлю так и буду переделывать позже_

Решения по архитектуре и как это будет делаться 

По итогам event storming я предлагаю выбрать цитадель (монолит и пару микросервисов)

Что можно унести в отдельные сервисы и почему:

1. Ставки - не влияют на логику бизнес процессов и раз идея приделать их сбоку - то микросервис идеально подходит. Кроме того - если кто-то решит это проверить - сервис просто потушим и никто ничего про него не узнает
2. Тестирование новых соискателей на работу - так как сервис отдаётся может подвергнуться ddos , то лучше его отделить от монотолита. Так же его функциоальность передачи теста соискателю + заведения шаблонов теста - полностью изолированная сущность , не связанная с другими частями системы
3. Всё остальное в данный момент лучше убрать в монолит, так как 
	1. Моделями пользуются все бизнес модули - для чтения, изменения и передачи в бизнес процессы
	2. Есть модуль с нотфикациями, ролями и балансом, которые в данный момент очень связаны
	3. Просто будет реализовать работу с кроном расчёта баланса 
	4. Проще достичь изоляции изменений по части заявки/сборки инвентаря/баланса
	5. Изменения отношений моделей и процессов будет проще передать в рамках одной кодовой базы, а не 3-4 - что влияет на TTM 